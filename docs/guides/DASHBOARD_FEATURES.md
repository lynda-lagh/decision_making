# ğŸ“Š WeeFarm Streamlit Dashboard - Complete Features

## ğŸ¯ Overview

Your Streamlit dashboard now includes **7 comprehensive pages** with advanced analytics, time series forecasting, and real-time insights from your complete ML pipeline.

---

## ğŸ“‘ Dashboard Pages

### 1. ğŸ  **Overview Page**
**Purpose**: Real-time system status and key metrics

**Features**:
- Equipment status summary
- Recent failures list
- Upcoming maintenance tasks
- Critical alerts
- System health indicators

**Data Source**: API endpoints + Database

---

### 2. ğŸ”§ **Equipment Page**
**Purpose**: Equipment management and details

**Features**:
- Equipment list with filters
- Equipment details (age, type, location)
- Maintenance history per equipment
- Failure history per equipment
- Equipment health scores

**Data Source**: `/equipment` API endpoints

---

### 3. ğŸ“Š **Predictions Page**
**Purpose**: ML-based failure predictions

**Features**:
- **397 Equipment predictions** with risk scores
- Risk level distribution (Critical, High, Medium, Low)
- Predicted failure probabilities
- Equipment prioritization
- Recommended actions
- Filter by risk level and equipment type

**Data Source**: `/predictions` API + Pipeline Stage 3 & 4

**What You'll See**:
- Critical: 113 equipment (>70% risk)
- High: 128 equipment (40-70% risk)
- Medium: 77 equipment (20-40% risk)
- Low: 79 equipment (<20% risk)

---

### 4. ğŸ“… **Schedule Page**
**Purpose**: Maintenance scheduling and task management

**Features**:
- **318 Maintenance tasks** generated by pipeline
- Upcoming maintenance calendar
- Overdue tasks alerts
- Task prioritization
- Maintenance type breakdown
- Schedule by equipment

**Data Source**: `/schedule` API + Pipeline Stage 4 & 6

---

### 5. ğŸ“ˆ **Analytics Page** (ENHANCED!)
**Purpose**: Advanced analytics from Phase 8

**Features**:

#### **Tab 1: Business KPIs**
- Cost reduction %
- ROI metrics
- System uptime
- Financial performance

#### **Tab 2: Operational KPIs**
- MTBF (Mean Time Between Failures)
- MTTR (Mean Time To Repair)
- Preventive maintenance ratio
- Equipment utilization

#### **Tab 3: ğŸ” Root Cause Analysis**
- **Pareto Chart**: Root causes by total cost
- Cumulative cost percentage
- Top 5 root causes breakdown
- Failure count by cause
- Cost impact analysis

**Data**: 656 failures analyzed

#### **Tab 4: ğŸ“Š Equipment Reliability**
- **MTBF by Equipment Type**: Bar charts
- Failure distribution pie charts
- Cost distribution by type
- **Top 10 Worst Performers**: Lowest MTBF equipment
- Reliability metrics table

**Data**: 397 equipment analyzed

#### **Tab 5: ğŸ’° Cost-Benefit Analysis**
- Total failure cost: $740K
- Total maintenance cost: $1.04M
- Total downtime cost (calculated)
- **Potential savings** from preventive maintenance
- ROI recommendations
- Cost breakdown charts
- Expected savings (70% reduction scenario)

**Insights**:
- 61.1% of failures are preventable
- Estimated ROI: 300% within 18 months

#### **Tab 6: ğŸ¤– Model Performance**
- Model accuracy metrics
- Precision and recall
- F1 scores
- Model comparison

**Data Source**: 
- `/analytics/*` API endpoints
- `results/` folder CSV files
- Database aggregations

---

### 6. ğŸ”® **Forecasting Page** (NEW!)
**Purpose**: Time series forecasting from Phase 6

**Features**:

#### **Tab 1: ğŸ“Š Daily Failures Forecast**
- **30-day failure forecast** with confidence intervals
- Historical trend line
- 7-day moving average
- Interactive forecast controls (7-90 days)
- Forecast metrics:
  - Average daily failures
  - Total forecasted failures
  - Trend indicator (â†‘/â†“)

#### **Tab 2: ğŸ“‰ Trend Analysis**
- Monthly failure trends
- Cost trends over time
- Downtime trends
- Seasonal patterns
- Year-over-year comparison

#### **Tab 3: ğŸ”® Equipment-Level Forecast**
- **Top 10 equipment** failure forecasts
- Equipment-specific failure rates
- 30-day predictions per equipment
- Historical vs forecasted comparison
- Detailed forecast table

#### **Tab 4: ğŸ“‹ Forecast Summary**
- Historical statistics
- 30-day forecast summary
- Cost impact projections
- **Key Insights**:
  - Trend detection (increasing/decreasing/stable)
  - Automated recommendations
  - Resource planning guidance
  - Budget allocation suggestions

**Data Source**: 
- `failure_events.csv`
- Time series models
- Statistical forecasting

---

### 7. âš™ï¸ **Settings Page**
**Purpose**: System configuration

**Features**:
- API configuration
- Database settings
- Notification preferences
- User preferences
- System logs

---

## ğŸ¨ Visual Features

### Charts & Visualizations

1. **Plotly Interactive Charts**:
   - Pareto charts
   - Bar charts
   - Line charts
   - Pie charts
   - Scatter plots
   - Time series plots

2. **Metrics Cards**:
   - KPI metrics with deltas
   - Color-coded priorities
   - Trend indicators

3. **Tables**:
   - Sortable data tables
   - Filterable equipment lists
   - Detailed breakdowns

---

## ğŸ“Š Data Flow

```
Database (PostgreSQL)
    â†“
Pipeline (6 Stages)
    â”œâ”€â”€ Stage 1: Data Ingestion
    â”œâ”€â”€ Stage 2: Feature Engineering (38 features)
    â”œâ”€â”€ Stage 3: Predictions (397 equipment)
    â”œâ”€â”€ Stage 4: Decision Engine (318 tasks)
    â”œâ”€â”€ Stage 5: KPI Calculation (20 KPIs)
    â””â”€â”€ Stage 6: Storage
    â†“
API Endpoints (/analytics/*, /predictions, /schedule)
    â†“
Streamlit Dashboard (7 pages)
    â†“
User Interface
```

---

## ğŸš€ How to Use

### Start the Dashboard

```bash
cd dashboard
streamlit run app.py
```

### Navigate Pages

Use the sidebar to switch between:
1. Overview - Quick system status
2. Equipment - Equipment management
3. Predictions - ML predictions (397 equipment)
4. Schedule - Maintenance tasks (318 tasks)
5. **Analytics** - Advanced analytics (Phase 8)
6. **Forecasting** - Time series forecasts (Phase 6)
7. Settings - Configuration

---

## ğŸ“ˆ Key Metrics Available

### From Pipeline
- âœ… 397 Equipment analyzed
- âœ… 397 Predictions generated
- âœ… 318 Maintenance tasks scheduled
- âœ… 20 KPIs calculated
- âœ… 38 Features engineered

### From Analytics
- âœ… 656 Failures analyzed
- âœ… 2,093 Maintenance records
- âœ… Root cause breakdown
- âœ… MTBF calculations
- âœ… Cost-benefit analysis
- âœ… 61.1% prevention rate

### From Forecasting
- âœ… 30-day failure forecast
- âœ… Equipment-level predictions
- âœ… Trend analysis
- âœ… Cost projections

---

## ğŸ’¡ Insights & Recommendations

The dashboard automatically provides:

1. **Trend Detection**: Identifies increasing/decreasing failure patterns
2. **Cost Optimization**: Highlights potential savings opportunities
3. **Resource Planning**: Suggests maintenance schedules
4. **Risk Prioritization**: Ranks equipment by failure risk
5. **ROI Projections**: Estimates return on preventive maintenance

---

## ğŸ”„ Data Refresh

### Manual Refresh
```bash
# Refresh data from database
python run_complete_pipeline.py --refresh-data

# Run full pipeline
python pipeline/pipeline.py
```

### What Gets Updated
- Predictions (397 equipment)
- Maintenance schedule (318 tasks)
- KPIs (20 metrics)
- Forecasts (30-day)
- Analytics (all charts)

---

## ğŸ¯ Next Steps

1. **Customize Visualizations**: Edit `pages/*.py` files
2. **Add New Metrics**: Extend KPI calculations
3. **Improve Forecasts**: Train better time series models
4. **Add Alerts**: Implement notification system
5. **Export Reports**: Add PDF/Excel export functionality

---

## ğŸ“ Support

For issues or enhancements:
1. Check `pipeline.log` for errors
2. Verify API is running: `http://localhost:5000/docs`
3. Ensure database has data
4. Run pipeline to refresh predictions

---

**Last Updated**: November 2, 2025  
**Version**: 1.0  
**Status**: âœ… Fully Functional
